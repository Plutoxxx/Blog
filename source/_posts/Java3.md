---
title: JavaåŸºç¡€â‘¢
<!-- img: https://image-1300514593.cos.ap-shanghai.myqcloud.com/featureimages/7.jpg -->
top: false
cover: false
toc: true
mathjax: true
date: 2019-12-01 19:50:44
password:
summary: æ€»ç»“IOæµç­‰ç›¸å…³çš„çŸ¥è¯†ğŸ¤ª
tags:
- Java
- è¯­è¨€
categories:
- Java
---
<div align="middle"><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=555142&auto=1&height=66"></iframe></div>

>ä¸»è¦æ€»ç»“IOæµç­‰ç›¸å…³çš„çŸ¥è¯†ğŸ¤ª

# ä¸»è¦å†…å®¹
* IOæµ
* å­—èŠ‚æµ
* å­—ç¬¦æµ
* ç¼“å†²æµ
* è½¬æ¢æµ
* åºåˆ—åŒ–æµ
* æ‰“å°æµ

# ç¬¬ä¸€ç«  IOæ¦‚è¿°

## 1.1 ä»€ä¹ˆæ˜¯IO

ç”Ÿæ´»ä¸­ï¼Œä½ è‚¯å®šç»å†è¿‡è¿™æ ·çš„åœºæ™¯ã€‚å½“ä½ ç¼–è¾‘ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œå¿˜è®°äº†`ctrl+s` ï¼Œå¯èƒ½æ–‡ä»¶å°±ç™½ç™½ç¼–è¾‘äº†ã€‚å½“ä½ ç”µè„‘ä¸Šæ’å…¥ä¸€ä¸ªUç›˜ï¼Œå¯ä»¥æŠŠä¸€ä¸ªè§†é¢‘ï¼Œæ‹·è´åˆ°ä½ çš„ç”µè„‘ç¡¬ç›˜é‡Œã€‚é‚£ä¹ˆæ•°æ®éƒ½æ˜¯åœ¨å“ªäº›è®¾å¤‡ä¸Šçš„å‘¢ï¼Ÿé”®ç›˜ã€å†…å­˜ã€ç¡¬ç›˜ã€å¤–æ¥è®¾å¤‡ç­‰ç­‰ã€‚

æˆ‘ä»¬æŠŠè¿™ç§æ•°æ®çš„ä¼ è¾“ï¼Œå¯ä»¥çœ‹åšæ˜¯ä¸€ç§æ•°æ®çš„æµåŠ¨ï¼ŒæŒ‰ç…§æµåŠ¨çš„æ–¹å‘ï¼Œä»¥å†…å­˜ä¸ºåŸºå‡†ï¼Œåˆ†ä¸º`è¾“å…¥input` å’Œ`è¾“å‡ºoutput` ï¼Œå³æµå‘å†…å­˜æ˜¯è¾“å…¥æµï¼Œæµå‡ºå†…å­˜çš„è¾“å‡ºæµã€‚

Javaä¸­I/Oæ“ä½œä¸»è¦æ˜¯æŒ‡ä½¿ç”¨`java.io`åŒ…ä¸‹çš„å†…å®¹ï¼Œè¿›è¡Œè¾“å…¥ã€è¾“å‡ºæ“ä½œã€‚**è¾“å…¥**ä¹Ÿå«åš**è¯»å–**æ•°æ®ï¼Œ**è¾“å‡º**ä¹Ÿå«åšä½œ**å†™å‡º**æ•°æ®ã€‚

## 1.2 IOçš„åˆ†ç±»

æ ¹æ®æ•°æ®çš„æµå‘åˆ†ä¸ºï¼š**è¾“å…¥æµ**å’Œ**è¾“å‡ºæµ**ã€‚

* **è¾“å…¥æµ** ï¼šæŠŠæ•°æ®ä»`å…¶ä»–è®¾å¤‡`ä¸Šè¯»å–åˆ°`å†…å­˜`ä¸­çš„æµã€‚ 
* **è¾“å‡ºæµ** ï¼šæŠŠæ•°æ®ä»`å†…å­˜` ä¸­å†™å‡ºåˆ°`å…¶ä»–è®¾å¤‡`ä¸Šçš„æµã€‚

æ ¼å±€æ•°æ®çš„ç±»å‹åˆ†ä¸ºï¼š**å­—èŠ‚æµ**å’Œ**å­—ç¬¦æµ**ã€‚

* **å­—èŠ‚æµ** ï¼šä»¥å­—èŠ‚ä¸ºå•ä½ï¼Œè¯»å†™æ•°æ®çš„æµã€‚
* **å­—ç¬¦æµ** ï¼šä»¥å­—ç¬¦ä¸ºå•ä½ï¼Œè¯»å†™æ•°æ®çš„æµã€‚

## 1.3 IOçš„æµå‘è¯´æ˜å›¾è§£

![](1_io.jpg)

## 1.4 é¡¶çº§çˆ¶ç±»ä»¬

|         |          **è¾“å…¥æµ**           |             è¾“å‡ºæµ             |
| :-----: | :------------------------: | :-------------------------: |
| **å­—èŠ‚æµ** | å­—èŠ‚è¾“å…¥æµ<br />**InputStream** | å­—èŠ‚è¾“å‡ºæµ<br />**OutputStream** |
| **å­—ç¬¦æµ** |   å­—ç¬¦è¾“å…¥æµ<br />**Reader**    |    å­—ç¬¦è¾“å‡ºæµ<br />**Writer**    |

# ç¬¬äºŒç«  å­—èŠ‚æµ

## 2.1 ä¸€åˆ‡çš†ä¸ºå­—èŠ‚

ä¸€åˆ‡æ–‡ä»¶æ•°æ®ï¼ˆæ–‡æœ¬ã€å›¾ç‰‡ã€è§†é¢‘ç­‰ï¼‰åœ¨å­˜å‚¨æ—¶ï¼Œéƒ½æ˜¯ä»¥äºŒè¿›åˆ¶æ•°å­—çš„å½¢å¼ä¿å­˜ï¼Œéƒ½ä¸€ä¸ªä¸€ä¸ªçš„å­—èŠ‚ï¼Œé‚£ä¹ˆä¼ è¾“æ—¶ä¸€æ ·å¦‚æ­¤ã€‚æ‰€ä»¥ï¼Œå­—èŠ‚æµå¯ä»¥ä¼ è¾“ä»»æ„æ–‡ä»¶æ•°æ®ã€‚åœ¨æ“ä½œæµçš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦æ—¶åˆ»æ˜ç¡®ï¼Œæ— è®ºä½¿ç”¨ä»€ä¹ˆæ ·çš„æµå¯¹è±¡ï¼Œåº•å±‚ä¼ è¾“çš„å§‹ç»ˆä¸ºäºŒè¿›åˆ¶æ•°æ®ã€‚

## 2.2 å­—èŠ‚è¾“å‡ºæµã€OutputStreamã€‘

`java.io.OutputStream `æŠ½è±¡ç±»æ˜¯è¡¨ç¤ºå­—èŠ‚è¾“å‡ºæµçš„æ‰€æœ‰ç±»çš„è¶…ç±»ï¼Œå°†æŒ‡å®šçš„å­—èŠ‚ä¿¡æ¯å†™å‡ºåˆ°ç›®çš„åœ°ã€‚å®ƒå®šä¹‰äº†å­—èŠ‚è¾“å‡ºæµçš„åŸºæœ¬å…±æ€§åŠŸèƒ½æ–¹æ³•ã€‚

* `public void close()` ï¼šå…³é—­æ­¤è¾“å‡ºæµå¹¶é‡Šæ”¾ä¸æ­¤æµç›¸å…³è”çš„ä»»ä½•ç³»ç»Ÿèµ„æºã€‚  
* `public void flush() ` ï¼šåˆ·æ–°æ­¤è¾“å‡ºæµå¹¶å¼ºåˆ¶ä»»ä½•ç¼“å†²çš„è¾“å‡ºå­—èŠ‚è¢«å†™å‡ºã€‚  
* `public void write(byte[] b)`ï¼šå°† b.lengthå­—èŠ‚ä»æŒ‡å®šçš„å­—èŠ‚æ•°ç»„å†™å…¥æ­¤è¾“å‡ºæµã€‚  
* `public void write(byte[] b, int off, int len)` ï¼šä»æŒ‡å®šçš„å­—èŠ‚æ•°ç»„å†™å…¥ lenå­—èŠ‚ï¼Œä»åç§»é‡ offå¼€å§‹è¾“å‡ºåˆ°æ­¤è¾“å‡ºæµã€‚  
* `public abstract void write(int b)` ï¼šå°†æŒ‡å®šçš„å­—èŠ‚è¾“å‡ºæµã€‚

> å°è´´å£«ï¼š
>
> closeæ–¹æ³•ï¼Œå½“å®Œæˆæµçš„æ“ä½œæ—¶ï¼Œå¿…é¡»è°ƒç”¨æ­¤æ–¹æ³•ï¼Œé‡Šæ”¾ç³»ç»Ÿèµ„æºã€‚

## 2.3 FileOutputStreamç±»

`OutputStream`æœ‰å¾ˆå¤šå­ç±»ï¼Œæˆ‘ä»¬ä»æœ€ç®€å•çš„ä¸€ä¸ªå­ç±»å¼€å§‹ã€‚

`java.io.FileOutputStream `ç±»æ˜¯æ–‡ä»¶è¾“å‡ºæµï¼Œç”¨äºå°†æ•°æ®å†™å‡ºåˆ°æ–‡ä»¶ã€‚

### æ„é€ æ–¹æ³•

* `public FileOutputStream(File file)`ï¼šåˆ›å»ºæ–‡ä»¶è¾“å‡ºæµä»¥å†™å…¥ç”±æŒ‡å®šçš„ Fileå¯¹è±¡è¡¨ç¤ºçš„æ–‡ä»¶ã€‚ 
* `public FileOutputStream(String name)`ï¼š åˆ›å»ºæ–‡ä»¶è¾“å‡ºæµä»¥æŒ‡å®šçš„åç§°å†™å…¥æ–‡ä»¶ã€‚  

å½“ä½ åˆ›å»ºä¸€ä¸ªæµå¯¹è±¡æ—¶ï¼Œå¿…é¡»ä¼ å…¥ä¸€ä¸ªæ–‡ä»¶è·¯å¾„ã€‚è¯¥è·¯å¾„ä¸‹ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œä¼šåˆ›å»ºè¯¥æ–‡ä»¶ã€‚å¦‚æœæœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œä¼šæ¸…ç©ºè¿™ä¸ªæ–‡ä»¶çš„æ•°æ®ã€‚

* æ„é€ ä¸¾ä¾‹ï¼Œä»£ç å¦‚ä¸‹ï¼š

```java
public class FileOutputStreamConstructor throws IOException {
    public static void main(String[] args) {
   	 	// ä½¿ç”¨Fileå¯¹è±¡åˆ›å»ºæµå¯¹è±¡
        File file = new File("a.txt");
        FileOutputStream fos = new FileOutputStream(file);
      
        // ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡
        FileOutputStream fos = new FileOutputStream("b.txt");
    }
}
```

### å†™å‡ºå­—èŠ‚æ•°æ®

1. **å†™å‡ºå­—èŠ‚**ï¼š`write(int b)` æ–¹æ³•ï¼Œæ¯æ¬¡å¯ä»¥å†™å‡ºä¸€ä¸ªå­—èŠ‚æ•°æ®ï¼Œä»£ç ä½¿ç”¨æ¼”ç¤ºï¼š

```java
public class FOSWrite {
    public static void main(String[] args) throws IOException {
        // ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡
        FileOutputStream fos = new FileOutputStream("fos.txt");     
      	// å†™å‡ºæ•°æ®
      	fos.write(97); // å†™å‡ºç¬¬1ä¸ªå­—èŠ‚
      	fos.write(98); // å†™å‡ºç¬¬2ä¸ªå­—èŠ‚
      	fos.write(99); // å†™å‡ºç¬¬3ä¸ªå­—èŠ‚
      	// å…³é—­èµ„æº
        fos.close();
    }
}
è¾“å‡ºç»“æœï¼š
abc
```

> å°è´´å£«ï¼š
>
> 1. è™½ç„¶å‚æ•°ä¸ºintç±»å‹å››ä¸ªå­—èŠ‚ï¼Œä½†æ˜¯åªä¼šä¿ç•™ä¸€ä¸ªå­—èŠ‚çš„ä¿¡æ¯å†™å‡ºã€‚
> 2. æµæ“ä½œå®Œæ¯•åï¼Œå¿…é¡»é‡Šæ”¾ç³»ç»Ÿèµ„æºï¼Œè°ƒç”¨closeæ–¹æ³•ï¼Œåƒä¸‡è®°å¾—ã€‚

2. **å†™å‡ºå­—èŠ‚æ•°ç»„**ï¼š`write(byte[] b)`ï¼Œæ¯æ¬¡å¯ä»¥å†™å‡ºæ•°ç»„ä¸­çš„æ•°æ®ï¼Œä»£ç ä½¿ç”¨æ¼”ç¤ºï¼š

```java
public class FOSWrite {
    public static void main(String[] args) throws IOException {
        // ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡
        FileOutputStream fos = new FileOutputStream("fos.txt");     
      	// å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„
      	byte[] b = "ç¨‹åºå‘˜".getBytes();
      	// å†™å‡ºå­—èŠ‚æ•°ç»„æ•°æ®
      	fos.write(b);
      	// å…³é—­èµ„æº
        fos.close();
    }
}
è¾“å‡ºç»“æœï¼š
ç¨‹åºå‘˜
```

3. **å†™å‡ºæŒ‡å®šé•¿åº¦å­—èŠ‚æ•°ç»„**ï¼š`write(byte[] b, int off, int len)` ,æ¯æ¬¡å†™å‡ºä»offç´¢å¼•å¼€å§‹ï¼Œlenä¸ªå­—èŠ‚ï¼Œä»£ç ä½¿ç”¨æ¼”ç¤ºï¼š

```java
public class FOSWrite {
    public static void main(String[] args) throws IOException {
        // ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡
        FileOutputStream fos = new FileOutputStream("fos.txt");     
      	// å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„
      	byte[] b = "abcde".getBytes();
		// å†™å‡ºä»ç´¢å¼•2å¼€å§‹ï¼Œ2ä¸ªå­—èŠ‚ã€‚ç´¢å¼•2æ˜¯cï¼Œä¸¤ä¸ªå­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯cdã€‚
        fos.write(b,2,2);
      	// å…³é—­èµ„æº
        fos.close();
    }
}
è¾“å‡ºç»“æœï¼š
cd
```

### æ•°æ®è¿½åŠ ç»­å†™

ç»è¿‡ä»¥ä¸Šçš„æ¼”ç¤ºï¼Œæ¯æ¬¡ç¨‹åºè¿è¡Œï¼Œåˆ›å»ºè¾“å‡ºæµå¯¹è±¡ï¼Œéƒ½ä¼šæ¸…ç©ºç›®æ ‡æ–‡ä»¶ä¸­çš„æ•°æ®ã€‚å¦‚ä½•ä¿ç•™ç›®æ ‡æ–‡ä»¶ä¸­æ•°æ®ï¼Œè¿˜èƒ½ç»§ç»­æ·»åŠ æ–°æ•°æ®å‘¢ï¼Ÿ

- `public FileOutputStream(File file, boolean append)`ï¼š åˆ›å»ºæ–‡ä»¶è¾“å‡ºæµä»¥å†™å…¥ç”±æŒ‡å®šçš„ Fileå¯¹è±¡è¡¨ç¤ºçš„æ–‡ä»¶ã€‚  
- `public FileOutputStream(String name, boolean append)`ï¼š åˆ›å»ºæ–‡ä»¶è¾“å‡ºæµä»¥æŒ‡å®šçš„åç§°å†™å…¥æ–‡ä»¶ã€‚  

è¿™ä¸¤ä¸ªæ„é€ æ–¹æ³•ï¼Œå‚æ•°ä¸­éƒ½éœ€è¦ä¼ å…¥ä¸€ä¸ªbooleanç±»å‹çš„å€¼ï¼Œ`true` è¡¨ç¤ºè¿½åŠ æ•°æ®ï¼Œ`false` è¡¨ç¤ºæ¸…ç©ºåŸæœ‰æ•°æ®ã€‚è¿™æ ·åˆ›å»ºçš„è¾“å‡ºæµå¯¹è±¡ï¼Œå°±å¯ä»¥æŒ‡å®šæ˜¯å¦è¿½åŠ ç»­å†™äº†ï¼Œä»£ç ä½¿ç”¨æ¼”ç¤ºï¼š

```java
public class FOSWrite {
    public static void main(String[] args) throws IOException {
        // ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡
        FileOutputStream fos = new FileOutputStream("fos.txt"ï¼Œtrue);     
      	// å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„
      	byte[] b = "abcde".getBytes();
		// å†™å‡ºä»ç´¢å¼•2å¼€å§‹ï¼Œ2ä¸ªå­—èŠ‚ã€‚ç´¢å¼•2æ˜¯cï¼Œä¸¤ä¸ªå­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯cdã€‚
        fos.write(b);
      	// å…³é—­èµ„æº
        fos.close();
    }
}
æ–‡ä»¶æ“ä½œå‰ï¼šcd
æ–‡ä»¶æ“ä½œåï¼šcdabcde
```

### å†™å‡ºæ¢è¡Œ

Windowsç³»ç»Ÿé‡Œï¼Œæ¢è¡Œç¬¦å·æ˜¯`\r\n` ã€‚ä»£ç ä½¿ç”¨æ¼”ç¤ºï¼š

```java
public class FOSWrite {
    public static void main(String[] args) throws IOException {
        // ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡
        FileOutputStream fos = new FileOutputStream("fos.txt");  
      	// å®šä¹‰å­—èŠ‚æ•°ç»„
      	byte[] words = {97,98,99,100,101};
      	// éå†æ•°ç»„
        for (int i = 0; i < words.length; i++) {
          	// å†™å‡ºä¸€ä¸ªå­—èŠ‚
            fos.write(words[i]);
          	// å†™å‡ºä¸€ä¸ªæ¢è¡Œ, æ¢è¡Œç¬¦å·è½¬æˆæ•°ç»„å†™å‡º
            fos.write("\r\n".getBytes());
        }
      	// å…³é—­èµ„æº
        fos.close();
    }
}

è¾“å‡ºç»“æœï¼š
a
b
c
d
e
```

> * å›è½¦ç¬¦`\r`å’Œæ¢è¡Œç¬¦`\n` ï¼š
>   * å›è½¦ç¬¦ï¼šå›åˆ°ä¸€è¡Œçš„å¼€å¤´ï¼ˆreturnï¼‰ã€‚
>   * æ¢è¡Œç¬¦ï¼šä¸‹ä¸€è¡Œï¼ˆnewlineï¼‰ã€‚
> * ç³»ç»Ÿä¸­çš„æ¢è¡Œï¼š
>   * Windowsç³»ç»Ÿé‡Œï¼Œæ¯è¡Œç»“å°¾æ˜¯ `å›è½¦+æ¢è¡Œ` ï¼Œå³`\r\n`ï¼›
>   * Unixç³»ç»Ÿé‡Œï¼Œæ¯è¡Œç»“å°¾åªæœ‰ `æ¢è¡Œ` ï¼Œå³`\n`ï¼›
>   * Macç³»ç»Ÿé‡Œï¼Œæ¯è¡Œç»“å°¾æ˜¯ `å›è½¦` ï¼Œå³`\r`ã€‚ä» Mac OS Xå¼€å§‹ä¸Linuxç»Ÿä¸€ã€‚
## 2.4 å­—èŠ‚è¾“å…¥æµã€InputStreamã€‘

`java.io.InputStream `æŠ½è±¡ç±»æ˜¯è¡¨ç¤ºå­—èŠ‚è¾“å…¥æµçš„æ‰€æœ‰ç±»çš„è¶…ç±»ï¼Œå¯ä»¥è¯»å–å­—èŠ‚ä¿¡æ¯åˆ°å†…å­˜ä¸­ã€‚å®ƒå®šä¹‰äº†å­—èŠ‚è¾“å…¥æµçš„åŸºæœ¬å…±æ€§åŠŸèƒ½æ–¹æ³•ã€‚

- `public void close()` ï¼šå…³é—­æ­¤è¾“å…¥æµå¹¶é‡Šæ”¾ä¸æ­¤æµç›¸å…³è”çš„ä»»ä½•ç³»ç»Ÿèµ„æºã€‚    
- `public abstract int read()`ï¼š ä»è¾“å…¥æµè¯»å–æ•°æ®çš„ä¸‹ä¸€ä¸ªå­—èŠ‚ã€‚ 
- `public int read(byte[] b)`ï¼š ä»è¾“å…¥æµä¸­è¯»å–ä¸€äº›å­—èŠ‚æ•°ï¼Œå¹¶å°†å®ƒä»¬å­˜å‚¨åˆ°å­—èŠ‚æ•°ç»„ bä¸­ ã€‚

> å°è´´å£«ï¼š
> closeæ–¹æ³•ï¼Œå½“å®Œæˆæµçš„æ“ä½œæ—¶ï¼Œå¿…é¡»è°ƒç”¨æ­¤æ–¹æ³•ï¼Œé‡Šæ”¾ç³»ç»Ÿèµ„æºã€‚

## 2.5 FileInputStreamç±»

`java.io.FileInputStream `ç±»æ˜¯æ–‡ä»¶è¾“å…¥æµï¼Œä»æ–‡ä»¶ä¸­è¯»å–å­—èŠ‚ã€‚

### æ„é€ æ–¹æ³•

* `FileInputStream(File file)`ï¼š é€šè¿‡æ‰“å¼€ä¸å®é™…æ–‡ä»¶çš„è¿æ¥æ¥åˆ›å»ºä¸€ä¸ª FileInputStream ï¼Œè¯¥æ–‡ä»¶ç”±æ–‡ä»¶ç³»ç»Ÿä¸­çš„ Fileå¯¹è±¡ fileå‘½åã€‚ 
* `FileInputStream(String name)`ï¼š é€šè¿‡æ‰“å¼€ä¸å®é™…æ–‡ä»¶çš„è¿æ¥æ¥åˆ›å»ºä¸€ä¸ª FileInputStream ï¼Œè¯¥æ–‡ä»¶ç”±æ–‡ä»¶ç³»ç»Ÿä¸­çš„è·¯å¾„å nameå‘½åã€‚  

å½“ä½ åˆ›å»ºä¸€ä¸ªæµå¯¹è±¡æ—¶ï¼Œå¿…é¡»ä¼ å…¥ä¸€ä¸ªæ–‡ä»¶è·¯å¾„ã€‚è¯¥è·¯å¾„ä¸‹ï¼Œå¦‚æœæ²¡æœ‰è¯¥æ–‡ä»¶,ä¼šæŠ›å‡º`FileNotFoundException` ã€‚

- æ„é€ ä¸¾ä¾‹ï¼Œä»£ç å¦‚ä¸‹ï¼š

```java
public class FileInputStreamConstructor throws IOException{
    public static void main(String[] args) {
   	 	// ä½¿ç”¨Fileå¯¹è±¡åˆ›å»ºæµå¯¹è±¡
        File file = new File("a.txt");
        FileInputStream fos = new FileInputStream(file);
      
        // ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡
        FileInputStream fos = new FileInputStream("b.txt");
    }
}
```

### è¯»å–å­—èŠ‚æ•°æ®

1. **è¯»å–å­—èŠ‚**ï¼š`read`æ–¹æ³•ï¼Œæ¯æ¬¡å¯ä»¥è¯»å–ä¸€ä¸ªå­—èŠ‚çš„æ•°æ®ï¼Œæå‡ä¸ºintç±»å‹ï¼Œè¯»å–åˆ°æ–‡ä»¶æœ«å°¾ï¼Œè¿”å›`-1`ï¼Œä»£ç ä½¿ç”¨æ¼”ç¤ºï¼š

```java
public class FISRead {
    public static void main(String[] args) throws IOException{
      	// ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡
       	FileInputStream fis = new FileInputStream("read.txt");
      	// è¯»å–æ•°æ®ï¼Œè¿”å›ä¸€ä¸ªå­—èŠ‚
        int read = fis.read();
        System.out.println((char) read);
        read = fis.read();
        System.out.println((char) read);
        read = fis.read();
        System.out.println((char) read);
        read = fis.read();
        System.out.println((char) read);
        read = fis.read();
        System.out.println((char) read);
      	// è¯»å–åˆ°æœ«å°¾,è¿”å›-1
       	read = fis.read();
        System.out.println( read);
		// å…³é—­èµ„æº
        fis.close();
    }
}
è¾“å‡ºç»“æœï¼š
a
b
c
d
e
-1
```

å¾ªç¯æ”¹è¿›è¯»å–æ–¹å¼ï¼Œä»£ç ä½¿ç”¨æ¼”ç¤ºï¼š

```java
public class FISRead {
    public static void main(String[] args) throws IOException{
      	// ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡
       	FileInputStream fis = new FileInputStream("read.txt");
      	// å®šä¹‰å˜é‡ï¼Œä¿å­˜æ•°æ®
        int b ï¼›
        // å¾ªç¯è¯»å–
        while ((b = fis.read())!=-1) {
            System.out.println((char)b);
        }
		// å…³é—­èµ„æº
        fis.close();
    }
}
è¾“å‡ºç»“æœï¼š
a
b
c
d
e
```

> å°è´´å£«ï¼š
>
> 1. è™½ç„¶è¯»å–äº†ä¸€ä¸ªå­—èŠ‚ï¼Œä½†æ˜¯ä¼šè‡ªåŠ¨æå‡ä¸ºintç±»å‹ã€‚
> 2. æµæ“ä½œå®Œæ¯•åï¼Œå¿…é¡»é‡Šæ”¾ç³»ç»Ÿèµ„æºï¼Œè°ƒç”¨closeæ–¹æ³•ï¼Œåƒä¸‡è®°å¾—ã€‚

2. **ä½¿ç”¨å­—èŠ‚æ•°ç»„è¯»å–**ï¼š`read(byte[] b)`ï¼Œæ¯æ¬¡è¯»å–bçš„é•¿åº¦ä¸ªå­—èŠ‚åˆ°æ•°ç»„ä¸­ï¼Œè¿”å›è¯»å–åˆ°çš„æœ‰æ•ˆå­—èŠ‚ä¸ªæ•°ï¼Œè¯»å–åˆ°æœ«å°¾æ—¶ï¼Œè¿”å›`-1` ï¼Œä»£ç ä½¿ç”¨æ¼”ç¤ºï¼š

```java
public class FISRead {
    public static void main(String[] args) throws IOException{
      	// ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡.
       	FileInputStream fis = new FileInputStream("read.txt"); // æ–‡ä»¶ä¸­ä¸ºabcde
      	// å®šä¹‰å˜é‡ï¼Œä½œä¸ºæœ‰æ•ˆä¸ªæ•°
        int len ï¼›
        // å®šä¹‰å­—èŠ‚æ•°ç»„ï¼Œä½œä¸ºè£…å­—èŠ‚æ•°æ®çš„å®¹å™¨   
        byte[] b = new byte[2];
        // å¾ªç¯è¯»å–
        while (( len= fis.read(b))!=-1) {
           	// æ¯æ¬¡è¯»å–å,æŠŠæ•°ç»„å˜æˆå­—ç¬¦ä¸²æ‰“å°
            System.out.println(new String(b));
        }
		// å…³é—­èµ„æº
        fis.close();
    }
}

è¾“å‡ºç»“æœï¼š
ab
cd
ed
```

é”™è¯¯æ•°æ®`d`ï¼Œæ˜¯ç”±äºæœ€åä¸€æ¬¡è¯»å–æ—¶ï¼Œåªè¯»å–ä¸€ä¸ªå­—èŠ‚`e`ï¼Œæ•°ç»„ä¸­ï¼Œä¸Šæ¬¡è¯»å–çš„æ•°æ®æ²¡æœ‰è¢«å®Œå…¨æ›¿æ¢ï¼Œæ‰€ä»¥è¦é€šè¿‡`len` ï¼Œè·å–æœ‰æ•ˆçš„å­—èŠ‚ï¼Œä»£ç ä½¿ç”¨æ¼”ç¤ºï¼š

```java
public class FISRead {
    public static void main(String[] args) throws IOException{
      	// ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡.
       	FileInputStream fis = new FileInputStream("read.txt"); // æ–‡ä»¶ä¸­ä¸ºabcde
      	// å®šä¹‰å˜é‡ï¼Œä½œä¸ºæœ‰æ•ˆä¸ªæ•°
        int len ï¼›
        // å®šä¹‰å­—èŠ‚æ•°ç»„ï¼Œä½œä¸ºè£…å­—èŠ‚æ•°æ®çš„å®¹å™¨   
        byte[] b = new byte[2];
        // å¾ªç¯è¯»å–
        while (( len= fis.read(b))!=-1) {
           	// æ¯æ¬¡è¯»å–å,æŠŠæ•°ç»„çš„æœ‰æ•ˆå­—èŠ‚éƒ¨åˆ†ï¼Œå˜æˆå­—ç¬¦ä¸²æ‰“å°
            System.out.println(new String(bï¼Œ0ï¼Œlen));//  len æ¯æ¬¡è¯»å–çš„æœ‰æ•ˆå­—èŠ‚ä¸ªæ•°
        }
		// å…³é—­èµ„æº
        fis.close();
    }
}

è¾“å‡ºç»“æœï¼š
ab
cd
e
```

> å°è´´å£«ï¼š
>
> ä½¿ç”¨æ•°ç»„è¯»å–ï¼Œæ¯æ¬¡è¯»å–å¤šä¸ªå­—èŠ‚ï¼Œå‡å°‘äº†ç³»ç»Ÿé—´çš„IOæ“ä½œæ¬¡æ•°ï¼Œä»è€Œæé«˜äº†è¯»å†™çš„æ•ˆç‡ï¼Œå»ºè®®å¼€å‘ä¸­ä½¿ç”¨ã€‚

## 2.6 å­—èŠ‚æµç»ƒä¹ ï¼šå›¾ç‰‡å¤åˆ¶

### å¤åˆ¶åŸç†å›¾è§£

![](2_copy.jpg)
### æ¡ˆä¾‹å®ç°

å¤åˆ¶å›¾ç‰‡æ–‡ä»¶ï¼Œä»£ç ä½¿ç”¨æ¼”ç¤ºï¼š

```java
public class Copy {
    public static void main(String[] args) throws IOException {
        // 1.åˆ›å»ºæµå¯¹è±¡
        // 1.1 æŒ‡å®šæ•°æ®æº
        FileInputStream fis = new FileInputStream("D:\\test.jpg");
        // 1.2 æŒ‡å®šç›®çš„åœ°
        FileOutputStream fos = new FileOutputStream("test_copy.jpg");

        // 2.è¯»å†™æ•°æ®
        // 2.1 å®šä¹‰æ•°ç»„
        byte[] b = new byte[1024];
        // 2.2 å®šä¹‰é•¿åº¦
        int len;
        // 2.3 å¾ªç¯è¯»å–
        while ((len = fis.read(b))!=-1) {
            // 2.4 å†™å‡ºæ•°æ®
            fos.write(b, 0 , len);
        }

        // 3.å…³é—­èµ„æº
        fos.close();
        fis.close();
    }
}
```

> å°è´´å£«ï¼š
>
> æµçš„å…³é—­åŸåˆ™ï¼šå…ˆå¼€åå…³ï¼Œåå¼€å…ˆå…³ã€‚

# ç¬¬ä¸‰ç«  å­—ç¬¦æµ

å½“ä½¿ç”¨å­—èŠ‚æµè¯»å–æ–‡æœ¬æ–‡ä»¶æ—¶ï¼Œå¯èƒ½ä¼šæœ‰ä¸€ä¸ªå°é—®é¢˜ã€‚å°±æ˜¯é‡åˆ°ä¸­æ–‡å­—ç¬¦æ—¶ï¼Œå¯èƒ½ä¸ä¼šæ˜¾ç¤ºå®Œæ•´çš„å­—ç¬¦ï¼Œé‚£æ˜¯å› ä¸ºä¸€ä¸ªä¸­æ–‡å­—ç¬¦å¯èƒ½å ç”¨å¤šä¸ªå­—èŠ‚å­˜å‚¨ã€‚æ‰€ä»¥Javaæä¾›ä¸€äº›å­—ç¬¦æµç±»ï¼Œä»¥å­—ç¬¦ä¸ºå•ä½è¯»å†™æ•°æ®ï¼Œä¸“é—¨ç”¨äºå¤„ç†æ–‡æœ¬æ–‡ä»¶ã€‚

## 3.1 å­—ç¬¦è¾“å…¥æµã€Readerã€‘

`java.io.Reader`æŠ½è±¡ç±»æ˜¯è¡¨ç¤ºç”¨äºè¯»å–å­—ç¬¦æµçš„æ‰€æœ‰ç±»çš„è¶…ç±»ï¼Œå¯ä»¥è¯»å–å­—ç¬¦ä¿¡æ¯åˆ°å†…å­˜ä¸­ã€‚å®ƒå®šä¹‰äº†å­—ç¬¦è¾“å…¥æµçš„åŸºæœ¬å…±æ€§åŠŸèƒ½æ–¹æ³•ã€‚

- `public void close()` ï¼šå…³é—­æ­¤æµå¹¶é‡Šæ”¾ä¸æ­¤æµç›¸å…³è”çš„ä»»ä½•ç³»ç»Ÿèµ„æºã€‚    
- `public int read()`ï¼š ä»è¾“å…¥æµè¯»å–ä¸€ä¸ªå­—ç¬¦ã€‚ 
- `public int read(char[] cbuf)`ï¼š ä»è¾“å…¥æµä¸­è¯»å–ä¸€äº›å­—ç¬¦ï¼Œå¹¶å°†å®ƒä»¬å­˜å‚¨åˆ°å­—ç¬¦æ•°ç»„ cbufä¸­ ã€‚

## 3.2 FileReaderç±»  

`java.io.FileReader `ç±»æ˜¯è¯»å–å­—ç¬¦æ–‡ä»¶çš„ä¾¿åˆ©ç±»ã€‚æ„é€ æ—¶ä½¿ç”¨ç³»ç»Ÿé»˜è®¤çš„å­—ç¬¦ç¼–ç å’Œé»˜è®¤å­—èŠ‚ç¼“å†²åŒºã€‚

> å°è´´å£«ï¼š
>
> 1. å­—ç¬¦ç¼–ç ï¼šå­—èŠ‚ä¸å­—ç¬¦çš„å¯¹åº”è§„åˆ™ã€‚Windowsç³»ç»Ÿçš„ä¸­æ–‡ç¼–ç é»˜è®¤æ˜¯GBKç¼–ç è¡¨ã€‚
>
>    ideaä¸­UTF-8
>
> 2. å­—èŠ‚ç¼“å†²åŒºï¼šä¸€ä¸ªå­—èŠ‚æ•°ç»„ï¼Œç”¨æ¥ä¸´æ—¶å­˜å‚¨å­—èŠ‚æ•°æ®ã€‚

### æ„é€ æ–¹æ³•

- `FileReader(File file)`ï¼š åˆ›å»ºä¸€ä¸ªæ–°çš„ FileReader ï¼Œç»™å®šè¦è¯»å–çš„Fileå¯¹è±¡ã€‚   
- `FileReader(String fileName)`ï¼š åˆ›å»ºä¸€ä¸ªæ–°çš„ FileReader ï¼Œç»™å®šè¦è¯»å–çš„æ–‡ä»¶çš„åç§°ã€‚  

å½“ä½ åˆ›å»ºä¸€ä¸ªæµå¯¹è±¡æ—¶ï¼Œå¿…é¡»ä¼ å…¥ä¸€ä¸ªæ–‡ä»¶è·¯å¾„ã€‚ç±»ä¼¼äºFileInputStream ã€‚

- æ„é€ ä¸¾ä¾‹ï¼Œä»£ç å¦‚ä¸‹ï¼š

```java
public class FileReaderConstructor throws IOException{
    public static void main(String[] args) {
   	 	// ä½¿ç”¨Fileå¯¹è±¡åˆ›å»ºæµå¯¹è±¡
        File file = new File("a.txt");
        FileReader fr = new FileReader(file);
      
        // ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡
        FileReader fr = new FileReader("b.txt");
    }
}
```

### è¯»å–å­—ç¬¦æ•°æ®

1. **è¯»å–å­—ç¬¦**ï¼š`read`æ–¹æ³•ï¼Œæ¯æ¬¡å¯ä»¥è¯»å–ä¸€ä¸ªå­—ç¬¦çš„æ•°æ®ï¼Œæå‡ä¸ºintç±»å‹ï¼Œè¯»å–åˆ°æ–‡ä»¶æœ«å°¾ï¼Œè¿”å›`-1`ï¼Œå¾ªç¯è¯»å–ï¼Œä»£ç ä½¿ç”¨æ¼”ç¤ºï¼š
```java
public class FRRead {
    public static void main(String[] args) throws IOException {
      	// ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡
       	FileReader fr = new FileReader("read.txt");
      	// å®šä¹‰å˜é‡ï¼Œä¿å­˜æ•°æ®
        int b ï¼›
        // å¾ªç¯è¯»å–
        while ((b = fr.read())!=-1) {
            System.out.println((char)b);
        }
		// å…³é—­èµ„æº
        fr.close();
    }
}
è¾“å‡ºç»“æœï¼š
ç¨‹
åº
å‘˜
```

> å°è´´å£«ï¼šè™½ç„¶è¯»å–äº†ä¸€ä¸ªå­—ç¬¦ï¼Œä½†æ˜¯ä¼šè‡ªåŠ¨æå‡ä¸ºintç±»å‹ã€‚

2. **ä½¿ç”¨å­—ç¬¦æ•°ç»„è¯»å–**ï¼š`read(char[] cbuf)`ï¼Œæ¯æ¬¡è¯»å–bçš„é•¿åº¦ä¸ªå­—ç¬¦åˆ°æ•°ç»„ä¸­ï¼Œè¿”å›è¯»å–åˆ°çš„æœ‰æ•ˆå­—ç¬¦ä¸ªæ•°ï¼Œè¯»å–åˆ°æœ«å°¾æ—¶ï¼Œè¿”å›`-1` ï¼Œä»£ç ä½¿ç”¨æ¼”ç¤ºï¼š

```java
public class FRRead {
    public static void main(String[] args) throws IOException {
      	// ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡
       	FileReader fr = new FileReader("read.txt");
      	// å®šä¹‰å˜é‡ï¼Œä¿å­˜æœ‰æ•ˆå­—ç¬¦ä¸ªæ•°
        int len ï¼›
        // å®šä¹‰å­—ç¬¦æ•°ç»„ï¼Œä½œä¸ºè£…å­—ç¬¦æ•°æ®çš„å®¹å™¨
         char[] cbuf = new char[2];
        // å¾ªç¯è¯»å–
        while ((len = fr.read(cbuf))!=-1) {
            System.out.println(new String(cbuf));
        }
		// å…³é—­èµ„æº
        fr.close();
    }
}
è¾“å‡ºç»“æœï¼š
ç¨‹åº
å‘˜åº
```

è·å–æœ‰æ•ˆçš„å­—ç¬¦æ”¹è¿›ï¼Œä»£ç ä½¿ç”¨æ¼”ç¤ºï¼š

```java
public class FISRead {
    public static void main(String[] args) throws IOException {
      	// ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡
       	FileReader fr = new FileReader("read.txt");
      	// å®šä¹‰å˜é‡ï¼Œä¿å­˜æœ‰æ•ˆå­—ç¬¦ä¸ªæ•°
        int len ï¼›
        // å®šä¹‰å­—ç¬¦æ•°ç»„ï¼Œä½œä¸ºè£…å­—ç¬¦æ•°æ®çš„å®¹å™¨
        char[] cbuf = new char[2];
        // å¾ªç¯è¯»å–
        while ((len = fr.read(cbuf))!=-1) {
            System.out.println(new String(cbuf,0,len));
        }
    	// å…³é—­èµ„æº
        fr.close();
    }
}

è¾“å‡ºç»“æœï¼š
ç¨‹åº
å‘˜
```
## 3.3 å­—ç¬¦è¾“å‡ºæµã€Writerã€‘

`java.io.Writer `æŠ½è±¡ç±»æ˜¯è¡¨ç¤ºç”¨äºå†™å‡ºå­—ç¬¦æµçš„æ‰€æœ‰ç±»çš„è¶…ç±»ï¼Œå°†æŒ‡å®šçš„å­—ç¬¦ä¿¡æ¯å†™å‡ºåˆ°ç›®çš„åœ°ã€‚å®ƒå®šä¹‰äº†å­—èŠ‚è¾“å‡ºæµçš„åŸºæœ¬å…±æ€§åŠŸèƒ½æ–¹æ³•ã€‚

- `void write(int c)` å†™å…¥å•ä¸ªå­—ç¬¦ã€‚
- `void write(char[] cbuf) `å†™å…¥å­—ç¬¦æ•°ç»„ã€‚ 
- `abstract  void write(char[] cbuf, int off, int len) `å†™å…¥å­—ç¬¦æ•°ç»„çš„æŸä¸€éƒ¨åˆ†,offæ•°ç»„çš„å¼€å§‹ç´¢å¼•,lenå†™çš„å­—ç¬¦ä¸ªæ•°ã€‚ 
- `void write(String str) `å†™å…¥å­—ç¬¦ä¸²ã€‚ 
- `void write(String str, int off, int len)` å†™å…¥å­—ç¬¦ä¸²çš„æŸä¸€éƒ¨åˆ†,offå­—ç¬¦ä¸²çš„å¼€å§‹ç´¢å¼•,lenå†™çš„å­—ç¬¦ä¸ªæ•°ã€‚
- `void flush() `åˆ·æ–°è¯¥æµçš„ç¼“å†²ã€‚  
- `void close()` å…³é—­æ­¤æµï¼Œä½†è¦å…ˆåˆ·æ–°å®ƒã€‚ 

## 3.4 FileWriterç±»

`java.io.FileWriter `ç±»æ˜¯å†™å‡ºå­—ç¬¦åˆ°æ–‡ä»¶çš„ä¾¿åˆ©ç±»ã€‚æ„é€ æ—¶ä½¿ç”¨ç³»ç»Ÿé»˜è®¤çš„å­—ç¬¦ç¼–ç å’Œé»˜è®¤å­—èŠ‚ç¼“å†²åŒºã€‚

### æ„é€ æ–¹æ³•

- `FileWriter(File file)`ï¼š åˆ›å»ºä¸€ä¸ªæ–°çš„ FileWriterï¼Œç»™å®šè¦è¯»å–çš„Fileå¯¹è±¡ã€‚   
- `FileWriter(String fileName)`ï¼š åˆ›å»ºä¸€ä¸ªæ–°çš„ FileWriterï¼Œç»™å®šè¦è¯»å–çš„æ–‡ä»¶çš„åç§°ã€‚  

å½“ä½ åˆ›å»ºä¸€ä¸ªæµå¯¹è±¡æ—¶ï¼Œå¿…é¡»ä¼ å…¥ä¸€ä¸ªæ–‡ä»¶è·¯å¾„ï¼Œç±»ä¼¼äºFileOutputStreamã€‚

- æ„é€ ä¸¾ä¾‹ï¼Œä»£ç å¦‚ä¸‹ï¼š

```java
public class FileWriterConstructor {
    public static void main(String[] args) throws IOException {
   	 	// ä½¿ç”¨Fileå¯¹è±¡åˆ›å»ºæµå¯¹è±¡
        File file = new File("a.txt");
        FileWriter fw = new FileWriter(file);
      
        // ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡
        FileWriter fw = new FileWriter("b.txt");
    }
}
```

### åŸºæœ¬å†™å‡ºæ•°æ®

**å†™å‡ºå­—ç¬¦**ï¼š`write(int b)` æ–¹æ³•ï¼Œæ¯æ¬¡å¯ä»¥å†™å‡ºä¸€ä¸ªå­—ç¬¦æ•°æ®ï¼Œä»£ç ä½¿ç”¨æ¼”ç¤ºï¼š

```java
public class FWWrite {
    public static void main(String[] args) throws IOException {
        // ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡
        FileWriter fw = new FileWriter("fw.txt");     
      	// å†™å‡ºæ•°æ®
      	fw.write(97); // å†™å‡ºç¬¬1ä¸ªå­—ç¬¦
      	fw.write('b'); // å†™å‡ºç¬¬2ä¸ªå­—ç¬¦
      	fw.write('C'); // å†™å‡ºç¬¬3ä¸ªå­—ç¬¦
      	fw.write(30000); // å†™å‡ºç¬¬4ä¸ªå­—ç¬¦ï¼Œä¸­æ–‡ç¼–ç è¡¨ä¸­30000å¯¹åº”ä¸€ä¸ªæ±‰å­—ã€‚
      
      	/*
        ã€æ³¨æ„ã€‘å…³é—­èµ„æºæ—¶,ä¸FileOutputStreamä¸åŒã€‚
      	 å¦‚æœä¸å…³é—­,æ•°æ®åªæ˜¯ä¿å­˜åˆ°ç¼“å†²åŒºï¼Œå¹¶æœªä¿å­˜åˆ°æ–‡ä»¶ã€‚
        */
        // fw.close();
    }
}
è¾“å‡ºç»“æœï¼š
abCç”°
```

> å°è´´å£«ï¼š
>
> 1. è™½ç„¶å‚æ•°ä¸ºintç±»å‹å››ä¸ªå­—èŠ‚ï¼Œä½†æ˜¯åªä¼šä¿ç•™ä¸€ä¸ªå­—ç¬¦çš„ä¿¡æ¯å†™å‡ºã€‚
> 2. æœªè°ƒç”¨closeæ–¹æ³•ï¼Œæ•°æ®åªæ˜¯ä¿å­˜åˆ°äº†ç¼“å†²åŒºï¼Œå¹¶æœªå†™å‡ºåˆ°æ–‡ä»¶ä¸­ã€‚

### å…³é—­å’Œåˆ·æ–°

å› ä¸ºå†…ç½®ç¼“å†²åŒºçš„åŸå› ï¼Œå¦‚æœä¸å…³é—­è¾“å‡ºæµï¼Œæ— æ³•å†™å‡ºå­—ç¬¦åˆ°æ–‡ä»¶ä¸­ã€‚ä½†æ˜¯å…³é—­çš„æµå¯¹è±¡ï¼Œæ˜¯æ— æ³•ç»§ç»­å†™å‡ºæ•°æ®çš„ã€‚å¦‚æœæˆ‘ä»¬æ—¢æƒ³å†™å‡ºæ•°æ®ï¼Œåˆæƒ³ç»§ç»­ä½¿ç”¨æµï¼Œå°±éœ€è¦`flush` æ–¹æ³•äº†ã€‚

* `flush` ï¼šåˆ·æ–°ç¼“å†²åŒºï¼Œæµå¯¹è±¡å¯ä»¥ç»§ç»­ä½¿ç”¨ã€‚
* `close `:å…ˆåˆ·æ–°ç¼“å†²åŒºï¼Œç„¶åé€šçŸ¥ç³»ç»Ÿé‡Šæ”¾èµ„æºã€‚æµå¯¹è±¡ä¸å¯ä»¥å†è¢«ä½¿ç”¨äº†ã€‚

ä»£ç ä½¿ç”¨æ¼”ç¤ºï¼š

```java
public class FWWrite {
    public static void main(String[] args) throws IOException {
        // ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡
        FileWriter fw = new FileWriter("fw.txt");
        // å†™å‡ºæ•°æ®ï¼Œé€šè¿‡flush
        fw.write('åˆ·'); // å†™å‡ºç¬¬1ä¸ªå­—ç¬¦
        fw.flush();
        fw.write('æ–°'); // ç»§ç»­å†™å‡ºç¬¬2ä¸ªå­—ç¬¦ï¼Œå†™å‡ºæˆåŠŸ
        fw.flush();
      
      	// å†™å‡ºæ•°æ®ï¼Œé€šè¿‡close
        fw.write('å…³'); // å†™å‡ºç¬¬1ä¸ªå­—ç¬¦
        fw.close();
        fw.write('é—­'); // ç»§ç»­å†™å‡ºç¬¬2ä¸ªå­—ç¬¦,ã€æŠ¥é”™ã€‘java.io.IOException: Stream closed
        fw.close();
    }
}
```

> å°è´´å£«ï¼šå³ä¾¿æ˜¯flushæ–¹æ³•å†™å‡ºäº†æ•°æ®ï¼Œæ“ä½œçš„æœ€åè¿˜æ˜¯è¦è°ƒç”¨closeæ–¹æ³•ï¼Œé‡Šæ”¾ç³»ç»Ÿèµ„æºã€‚

### å†™å‡ºå…¶ä»–æ•°æ®

1. **å†™å‡ºå­—ç¬¦æ•°ç»„** ï¼š`write(char[] cbuf)` å’Œ `write(char[] cbuf, int off, int len)` ï¼Œæ¯æ¬¡å¯ä»¥å†™å‡ºå­—ç¬¦æ•°ç»„ä¸­çš„æ•°æ®ï¼Œç”¨æ³•ç±»ä¼¼FileOutputStreamï¼Œä»£ç ä½¿ç”¨æ¼”ç¤ºï¼š

```java
public class FWWrite {
    public static void main(String[] args) throws IOException {
        // ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡
        FileWriter fw = new FileWriter("fw.txt");     
      	// å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„
      	char[] chars = "Javaç¨‹åºå‘˜".toCharArray();
      
      	// å†™å‡ºå­—ç¬¦æ•°ç»„
      	fw.write(chars); // Javaç¨‹åºå‘˜
        
		// å†™å‡ºä»ç´¢å¼•2å¼€å§‹ï¼Œ2ä¸ªå­—èŠ‚ã€‚ç´¢å¼•2æ˜¯'ç¨‹'ï¼Œä¸¤ä¸ªå­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯'ç¨‹åº'ã€‚
        fw.write(b,2,2); // ç¨‹åº
      
      	// å…³é—­èµ„æº
        fos.close();
    }
}
```

2. **å†™å‡ºå­—ç¬¦ä¸²**ï¼š`write(String str)` å’Œ `write(String str, int off, int len)` ï¼Œæ¯æ¬¡å¯ä»¥å†™å‡ºå­—ç¬¦ä¸²ä¸­çš„æ•°æ®ï¼Œæ›´ä¸ºæ–¹ä¾¿ï¼Œä»£ç ä½¿ç”¨æ¼”ç¤ºï¼š

```java
public class FWWrite {
    public static void main(String[] args) throws IOException {
        // ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡
        FileWriter fw = new FileWriter("fw.txt");     
      	// å­—ç¬¦ä¸²
      	String msg = "Javaç¨‹åºå‘˜";
      
      	// å†™å‡ºå­—ç¬¦æ•°ç»„
      	fw.write(msg); //Javaç¨‹åºå‘˜
      
		// å†™å‡ºä»ç´¢å¼•2å¼€å§‹ï¼Œ2ä¸ªå­—èŠ‚ã€‚ç´¢å¼•2æ˜¯'ç¨‹'ï¼Œä¸¤ä¸ªå­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯'ç¨‹åº'ã€‚
        fw.write(msg,2,2);	// ç¨‹åº
      	
        // å…³é—­èµ„æº
        fos.close();
    }
}
```

3. **ç»­å†™å’Œæ¢è¡Œ**ï¼šæ“ä½œç±»ä¼¼äºFileOutputStreamã€‚

```java
public class FWWrite {
    public static void main(String[] args) throws IOException {
        // ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡ï¼Œå¯ä»¥ç»­å†™æ•°æ®
        FileWriter fw = new FileWriter("fw.txt"ï¼Œtrue);     
      	// å†™å‡ºå­—ç¬¦ä¸²
        fw.write("Java");
      	// å†™å‡ºæ¢è¡Œ
      	fw.write("\r\n");
      	// å†™å‡ºå­—ç¬¦ä¸²
  		fw.write("ç¨‹åºå‘˜");
      	// å…³é—­èµ„æº
        fw.close();
    }
}
è¾“å‡ºç»“æœ:
Java
ç¨‹åºå‘˜
```

> å°è´´å£«ï¼šå­—ç¬¦æµï¼Œåªèƒ½æ“ä½œæ–‡æœ¬æ–‡ä»¶ï¼Œä¸èƒ½æ“ä½œå›¾ç‰‡ï¼Œè§†é¢‘ç­‰éæ–‡æœ¬æ–‡ä»¶ã€‚
>
> å½“æˆ‘ä»¬å•çº¯è¯»æˆ–è€…å†™æ–‡æœ¬æ–‡ä»¶æ—¶  ä½¿ç”¨å­—ç¬¦æµ å…¶ä»–æƒ…å†µä½¿ç”¨å­—èŠ‚æµ

# ç¬¬å››ç«  ç¼“å†²æµ

å­¦ä¹ äº†åŸºæœ¬çš„ä¸€äº›æµï¼Œä½œä¸ºIOæµçš„å…¥é—¨ï¼Œä»Šå¤©æˆ‘ä»¬è¦è§è¯†ä¸€äº›æ›´å¼ºå¤§çš„æµã€‚æ¯”å¦‚èƒ½å¤Ÿé«˜æ•ˆè¯»å†™çš„ç¼“å†²æµï¼Œèƒ½å¤Ÿè½¬æ¢ç¼–ç çš„è½¬æ¢æµï¼Œèƒ½å¤ŸæŒä¹…åŒ–å­˜å‚¨å¯¹è±¡çš„åºåˆ—åŒ–æµç­‰ç­‰ã€‚è¿™äº›åŠŸèƒ½æ›´ä¸ºå¼ºå¤§çš„æµï¼Œéƒ½æ˜¯åœ¨åŸºæœ¬çš„æµå¯¹è±¡åŸºç¡€ä¹‹ä¸Šåˆ›å»ºè€Œæ¥çš„ï¼Œå°±åƒç©¿ä¸Šé“ ç”²çš„æ­¦å£«ä¸€æ ·ï¼Œç›¸å½“äºæ˜¯å¯¹åŸºæœ¬æµå¯¹è±¡çš„ä¸€ç§å¢å¼ºã€‚

## 4.1 æ¦‚è¿°

ç¼“å†²æµ,ä¹Ÿå«é«˜æ•ˆæµï¼Œæ˜¯å¯¹4ä¸ªåŸºæœ¬çš„`FileXxx` æµçš„å¢å¼ºï¼Œæ‰€ä»¥ä¹Ÿæ˜¯4ä¸ªæµï¼ŒæŒ‰ç…§æ•°æ®ç±»å‹åˆ†ç±»ï¼š

* **å­—èŠ‚ç¼“å†²æµ**ï¼š`BufferedInputStream`ï¼Œ`BufferedOutputStream` 
* **å­—ç¬¦ç¼“å†²æµ**ï¼š`BufferedReader`ï¼Œ`BufferedWriter`

ç¼“å†²æµçš„åŸºæœ¬åŸç†ï¼Œæ˜¯åœ¨åˆ›å»ºæµå¯¹è±¡æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªå†…ç½®çš„é»˜è®¤å¤§å°çš„ç¼“å†²åŒºæ•°ç»„ï¼Œé€šè¿‡ç¼“å†²åŒºè¯»å†™ï¼Œå‡å°‘ç³»ç»ŸIOæ¬¡æ•°ï¼Œä»è€Œæé«˜è¯»å†™çš„æ•ˆç‡ã€‚

## 4.2 å­—èŠ‚ç¼“å†²æµ

### æ„é€ æ–¹æ³•

* `public BufferedInputStream(InputStream in)` ï¼šåˆ›å»ºä¸€ä¸ª æ–°çš„ç¼“å†²è¾“å…¥æµã€‚ 
* `public BufferedOutputStream(OutputStream out)`ï¼š åˆ›å»ºä¸€ä¸ªæ–°çš„ç¼“å†²è¾“å‡ºæµã€‚

æ„é€ ä¸¾ä¾‹ï¼Œä»£ç å¦‚ä¸‹ï¼š

```java
// åˆ›å»ºå­—èŠ‚ç¼“å†²è¾“å…¥æµ
BufferedInputStream bis = new BufferedInputStream(new FileInputStream("bis.txt"));
// åˆ›å»ºå­—èŠ‚ç¼“å†²è¾“å‡ºæµ
BufferedOutputStream bos = new BufferedOutputStream(new FileOutputStream("bos.txt"));
```

### æ•ˆç‡æµ‹è¯•

æŸ¥è¯¢APIï¼Œç¼“å†²æµè¯»å†™æ–¹æ³•ä¸åŸºæœ¬çš„æµæ˜¯ä¸€è‡´çš„ï¼Œæˆ‘ä»¬é€šè¿‡å¤åˆ¶å¤§æ–‡ä»¶ï¼ˆ375MBï¼‰ï¼Œæµ‹è¯•å®ƒçš„æ•ˆç‡ã€‚

1. åŸºæœ¬æµï¼Œä»£ç å¦‚ä¸‹ï¼š

```java
public class BufferedDemo {
    public static void main(String[] args) throws FileNotFoundException {
        // è®°å½•å¼€å§‹æ—¶é—´
      	long start = System.currentTimeMillis();
		// åˆ›å»ºæµå¯¹è±¡
        try (
        	FileInputStream fis = new FileInputStream("jdk9.exe");
        	FileOutputStream fos = new FileOutputStream("copy.exe")
        ){
        	// è¯»å†™æ•°æ®
            int b;
            while ((b = fis.read()) != -1) {
                fos.write(b);
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
		// è®°å½•ç»“æŸæ—¶é—´
        long end = System.currentTimeMillis();
        System.out.println("æ™®é€šæµå¤åˆ¶æ—¶é—´:"+(end - start)+" æ¯«ç§’");
    }
}

åå‡ åˆ†é’Ÿè¿‡å»äº†...
```

2. ç¼“å†²æµï¼Œä»£ç å¦‚ä¸‹ï¼š

```java
public class BufferedDemo {
    public static void main(String[] args) throws FileNotFoundException {
        // è®°å½•å¼€å§‹æ—¶é—´
      	long start = System.currentTimeMillis();
		// åˆ›å»ºæµå¯¹è±¡
        try (
        	BufferedInputStream bis = new BufferedInputStream(new FileInputStream("jdk9.exe"));
	     BufferedOutputStream bos = new BufferedOutputStream(new FileOutputStream("copy.exe"));
        ){
        // è¯»å†™æ•°æ®
            int b;
            while ((b = bis.read()) != -1) {
                bos.write(b);
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
		// è®°å½•ç»“æŸæ—¶é—´
        long end = System.currentTimeMillis();
        System.out.println("ç¼“å†²æµå¤åˆ¶æ—¶é—´:"+(end - start)+" æ¯«ç§’");
    }
}

ç¼“å†²æµå¤åˆ¶æ—¶é—´:8016 æ¯«ç§’
```
å¦‚ä½•æ›´å¿«å‘¢ï¼Ÿ

ä½¿ç”¨æ•°ç»„çš„æ–¹å¼ï¼Œä»£ç å¦‚ä¸‹ï¼š

```java
public class BufferedDemo {
    public static void main(String[] args) throws FileNotFoundException {
      	// è®°å½•å¼€å§‹æ—¶é—´
        long start = System.currentTimeMillis();
		// åˆ›å»ºæµå¯¹è±¡
        try (
			BufferedInputStream bis = new BufferedInputStream(new FileInputStream("jdk9.exe"));
		 BufferedOutputStream bos = new BufferedOutputStream(new FileOutputStream("copy.exe"));
        ){
          	// è¯»å†™æ•°æ®
            int len;
            byte[] bytes = new byte[8*1024];
            while ((len = bis.read(bytes)) != -1) {
                bos.write(bytes, 0 , len);
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
		// è®°å½•ç»“æŸæ—¶é—´
        long end = System.currentTimeMillis();
        System.out.println("ç¼“å†²æµä½¿ç”¨æ•°ç»„å¤åˆ¶æ—¶é—´:"+(end - start)+" æ¯«ç§’");
    }
}
ç¼“å†²æµä½¿ç”¨æ•°ç»„å¤åˆ¶æ—¶é—´:666 æ¯«ç§’
```

## 4.3 å­—ç¬¦ç¼“å†²æµ

### æ„é€ æ–¹æ³•

* `public BufferedReader(Reader in)` ï¼šåˆ›å»ºä¸€ä¸ª æ–°çš„ç¼“å†²è¾“å…¥æµã€‚ 
* `public BufferedWriter(Writer out)`ï¼š åˆ›å»ºä¸€ä¸ªæ–°çš„ç¼“å†²è¾“å‡ºæµã€‚

æ„é€ ä¸¾ä¾‹ï¼Œä»£ç å¦‚ä¸‹ï¼š

```java
// åˆ›å»ºå­—ç¬¦ç¼“å†²è¾“å…¥æµ
BufferedReader br = new BufferedReader(new FileReader("br.txt"));
// åˆ›å»ºå­—ç¬¦ç¼“å†²è¾“å‡ºæµ
BufferedWriter bw = new BufferedWriter(new FileWriter("bw.txt"));
```

### ç‰¹æœ‰æ–¹æ³•

å­—ç¬¦ç¼“å†²æµçš„åŸºæœ¬æ–¹æ³•ä¸æ™®é€šå­—ç¬¦æµè°ƒç”¨æ–¹å¼ä¸€è‡´ï¼Œä¸å†é˜è¿°ï¼Œæˆ‘ä»¬æ¥çœ‹å®ƒä»¬å…·å¤‡çš„ç‰¹æœ‰æ–¹æ³•ã€‚

* BufferedReaderï¼š`public String readLine()`: è¯»ä¸€è¡Œæ–‡å­—ã€‚ 
* BufferedWriterï¼š`public void newLine()`: å†™ä¸€è¡Œè¡Œåˆ†éš”ç¬¦,ç”±ç³»ç»Ÿå±æ€§å®šä¹‰ç¬¦å·ã€‚ 

`readLine`æ–¹æ³•æ¼”ç¤ºï¼Œä»£ç å¦‚ä¸‹ï¼š

```java
public class BufferedReaderDemo {
    public static void main(String[] args) throws IOException {
      	 // åˆ›å»ºæµå¯¹è±¡
        BufferedReader br = new BufferedReader(new FileReader("in.txt"));
		// å®šä¹‰å­—ç¬¦ä¸²,ä¿å­˜è¯»å–çš„ä¸€è¡Œæ–‡å­—
        String line  = null;
      	// å¾ªç¯è¯»å–,è¯»å–åˆ°æœ€åè¿”å›null
        while ((line = br.readLine())!=null) {
            System.out.print(line);
            System.out.println("------");
        }
		// é‡Šæ”¾èµ„æº
        br.close();
    }
}
```

`newLine`æ–¹æ³•æ¼”ç¤ºï¼Œä»£ç å¦‚ä¸‹ï¼š

```java
public class BufferedWriterDemo throws IOException {
    public static void main(String[] args) throws IOException  {
      	// åˆ›å»ºæµå¯¹è±¡
		BufferedWriter bw = new BufferedWriter(new FileWriter("out.txt"));
      	// å†™å‡ºæ•°æ®
        bw.write("Java");
      	// å†™å‡ºæ¢è¡Œ
        bw.newLine();
        bw.write("ç¨‹åº");
        bw.newLine();
        bw.write("å‘˜");
        bw.newLine();
		// é‡Šæ”¾èµ„æº
        bw.close();
    }
}
è¾“å‡ºæ•ˆæœ:
Java
ç¨‹åº
å‘˜
```

# ç¬¬äº”ç«  è½¬æ¢æµ

## 5.1 å­—ç¬¦ç¼–ç å’Œå­—ç¬¦é›†

### å­—ç¬¦ç¼–ç 

è®¡ç®—æœºä¸­å‚¨å­˜çš„ä¿¡æ¯éƒ½æ˜¯ç”¨äºŒè¿›åˆ¶æ•°è¡¨ç¤ºçš„ï¼Œè€Œæˆ‘ä»¬åœ¨å±å¹•ä¸Šçœ‹åˆ°çš„æ•°å­—ã€è‹±æ–‡ã€æ ‡ç‚¹ç¬¦å·ã€æ±‰å­—ç­‰å­—ç¬¦æ˜¯äºŒè¿›åˆ¶æ•°è½¬æ¢ä¹‹åçš„ç»“æœã€‚æŒ‰ç…§æŸç§è§„åˆ™ï¼Œå°†å­—ç¬¦å­˜å‚¨åˆ°è®¡ç®—æœºä¸­ï¼Œç§°ä¸º**ç¼–ç ** ã€‚åä¹‹ï¼Œå°†å­˜å‚¨åœ¨è®¡ç®—æœºä¸­çš„äºŒè¿›åˆ¶æ•°æŒ‰ç…§æŸç§è§„åˆ™è§£ææ˜¾ç¤ºå‡ºæ¥ï¼Œç§°ä¸º**è§£ç ** ã€‚æ¯”å¦‚è¯´ï¼ŒæŒ‰ç…§Aè§„åˆ™å­˜å‚¨ï¼ŒåŒæ ·æŒ‰ç…§Aè§„åˆ™è§£æï¼Œé‚£ä¹ˆå°±èƒ½æ˜¾ç¤ºæ­£ç¡®çš„æ–‡æœ¬ç¬¦å·ã€‚åä¹‹ï¼ŒæŒ‰ç…§Aè§„åˆ™å­˜å‚¨ï¼Œå†æŒ‰ç…§Bè§„åˆ™è§£æï¼Œå°±ä¼šå¯¼è‡´ä¹±ç ç°è±¡ã€‚

ç¼–ç :å­—ç¬¦ï¼ˆèƒ½çœ‹æ‡‚çš„ï¼‰-->å­—èŠ‚ï¼ˆçœ‹ä¸æ‡‚çš„ï¼‰

è§£ç :å­—èŠ‚ï¼ˆçœ‹ä¸æ‡‚çš„ï¼‰-->å­—ç¬¦ï¼ˆèƒ½çœ‹æ‡‚çš„ï¼‰

* **å­—ç¬¦ç¼–ç `Character Encoding`** : å°±æ˜¯ä¸€å¥—è‡ªç„¶è¯­è¨€çš„å­—ç¬¦ä¸äºŒè¿›åˆ¶æ•°ä¹‹é—´çš„å¯¹åº”è§„åˆ™ã€‚

* **ç¼–ç è¡¨**:ç”Ÿæ´»ä¸­æ–‡å­—å’Œè®¡ç®—æœºä¸­äºŒè¿›åˆ¶çš„å¯¹åº”è§„åˆ™

### å­—ç¬¦é›†

* **å­—ç¬¦é›† `Charset`**ï¼šä¹Ÿå«ç¼–ç è¡¨ã€‚æ˜¯ä¸€ä¸ªç³»ç»Ÿæ”¯æŒçš„æ‰€æœ‰å­—ç¬¦çš„é›†åˆï¼ŒåŒ…æ‹¬å„å›½å®¶æ–‡å­—ã€æ ‡ç‚¹ç¬¦å·ã€å›¾å½¢ç¬¦å·ã€æ•°å­—ç­‰ã€‚

è®¡ç®—æœºè¦å‡†ç¡®çš„å­˜å‚¨å’Œè¯†åˆ«å„ç§å­—ç¬¦é›†ç¬¦å·ï¼Œéœ€è¦è¿›è¡Œå­—ç¬¦ç¼–ç ï¼Œä¸€å¥—å­—ç¬¦é›†å¿…ç„¶è‡³å°‘æœ‰ä¸€å¥—å­—ç¬¦ç¼–ç ã€‚å¸¸è§å­—ç¬¦é›†æœ‰ASCIIå­—ç¬¦é›†ã€GBKå­—ç¬¦é›†ã€Unicodeå­—ç¬¦é›†ç­‰ã€‚![](1_charset.jpg)

å¯è§ï¼Œå½“æŒ‡å®šäº†**ç¼–ç **ï¼Œå®ƒæ‰€å¯¹åº”çš„**å­—ç¬¦é›†**è‡ªç„¶å°±æŒ‡å®šäº†ï¼Œæ‰€ä»¥**ç¼–ç **æ‰æ˜¯æˆ‘ä»¬æœ€ç»ˆè¦å…³å¿ƒçš„ã€‚

* **ASCIIå­—ç¬¦é›†** ï¼š
  * ASCIIï¼ˆAmerican Standard Code for Information Interchangeï¼Œç¾å›½ä¿¡æ¯äº¤æ¢æ ‡å‡†ä»£ç ï¼‰æ˜¯åŸºäºæ‹‰ä¸å­—æ¯çš„ä¸€å¥—ç”µè„‘ç¼–ç ç³»ç»Ÿï¼Œç”¨äºæ˜¾ç¤ºç°ä»£è‹±è¯­ï¼Œä¸»è¦åŒ…æ‹¬æ§åˆ¶å­—ç¬¦ï¼ˆå›è½¦é”®ã€é€€æ ¼ã€æ¢è¡Œé”®ç­‰ï¼‰å’Œå¯æ˜¾ç¤ºå­—ç¬¦ï¼ˆè‹±æ–‡å¤§å°å†™å­—ç¬¦ã€é˜¿æ‹‰ä¼¯æ•°å­—å’Œè¥¿æ–‡ç¬¦å·ï¼‰ã€‚
  * åŸºæœ¬çš„ASCIIå­—ç¬¦é›†ï¼Œä½¿ç”¨7ä½ï¼ˆbitsï¼‰è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œå…±128å­—ç¬¦ã€‚ASCIIçš„æ‰©å±•å­—ç¬¦é›†ä½¿ç”¨8ä½ï¼ˆbitsï¼‰è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œå…±256å­—ç¬¦ï¼Œæ–¹ä¾¿æ”¯æŒæ¬§æ´²å¸¸ç”¨å­—ç¬¦ã€‚
* **ISO-8859-1å­—ç¬¦é›†**ï¼š
  * æ‹‰ä¸ç è¡¨ï¼Œåˆ«åLatin-1ï¼Œç”¨äºæ˜¾ç¤ºæ¬§æ´²ä½¿ç”¨çš„è¯­è¨€ï¼ŒåŒ…æ‹¬è·å…°ã€ä¸¹éº¦ã€å¾·è¯­ã€æ„å¤§åˆ©è¯­ã€è¥¿ç­ç‰™è¯­ç­‰ã€‚
  * ISO-8859-1ä½¿ç”¨å•å­—èŠ‚ç¼–ç ï¼Œå…¼å®¹ASCIIç¼–ç ã€‚
* **GBxxxå­—ç¬¦é›†**ï¼š
  * GBå°±æ˜¯å›½æ ‡çš„æ„æ€ï¼Œæ˜¯ä¸ºäº†æ˜¾ç¤ºä¸­æ–‡è€Œè®¾è®¡çš„ä¸€å¥—å­—ç¬¦é›†ã€‚
  * **GB2312**ï¼šç®€ä½“ä¸­æ–‡ç è¡¨ã€‚ä¸€ä¸ªå°äº127çš„å­—ç¬¦çš„æ„ä¹‰ä¸åŸæ¥ç›¸åŒã€‚ä½†ä¸¤ä¸ªå¤§äº127çš„å­—ç¬¦è¿åœ¨ä¸€èµ·æ—¶ï¼Œå°±è¡¨ç¤ºä¸€ä¸ªæ±‰å­—ï¼Œè¿™æ ·å¤§çº¦å¯ä»¥ç»„åˆäº†åŒ…å«7000å¤šä¸ªç®€ä½“æ±‰å­—ï¼Œæ­¤å¤–æ•°å­¦ç¬¦å·ã€ç½—é©¬å¸Œè…Šçš„å­—æ¯ã€æ—¥æ–‡çš„å‡åä»¬éƒ½ç¼–è¿›å»äº†ï¼Œè¿åœ¨ASCIIé‡Œæœ¬æ¥å°±æœ‰çš„æ•°å­—ã€æ ‡ç‚¹ã€å­—æ¯éƒ½ç»Ÿç»Ÿé‡æ–°ç¼–äº†ä¸¤ä¸ªå­—èŠ‚é•¿çš„ç¼–ç ï¼Œè¿™å°±æ˜¯å¸¸è¯´çš„"å…¨è§’"å­—ç¬¦ï¼Œè€ŒåŸæ¥åœ¨127å·ä»¥ä¸‹çš„é‚£äº›å°±å«"åŠè§’"å­—ç¬¦äº†ã€‚
  * **GBK**ï¼šæœ€å¸¸ç”¨çš„ä¸­æ–‡ç è¡¨ã€‚æ˜¯åœ¨GB2312æ ‡å‡†åŸºç¡€ä¸Šçš„æ‰©å±•è§„èŒƒï¼Œä½¿ç”¨äº†åŒå­—èŠ‚ç¼–ç æ–¹æ¡ˆï¼Œå…±æ”¶å½•äº†21003ä¸ªæ±‰å­—ï¼Œå®Œå…¨å…¼å®¹GB2312æ ‡å‡†ï¼ŒåŒæ—¶æ”¯æŒç¹ä½“æ±‰å­—ä»¥åŠæ—¥éŸ©æ±‰å­—ç­‰ã€‚
  * **GB18030**ï¼šæœ€æ–°çš„ä¸­æ–‡ç è¡¨ã€‚æ”¶å½•æ±‰å­—70244ä¸ªï¼Œé‡‡ç”¨å¤šå­—èŠ‚ç¼–ç ï¼Œæ¯ä¸ªå­—å¯ä»¥ç”±1ä¸ªã€2ä¸ªæˆ–4ä¸ªå­—èŠ‚ç»„æˆã€‚æ”¯æŒä¸­å›½å›½å†…å°‘æ•°æ°‘æ—çš„æ–‡å­—ï¼ŒåŒæ—¶æ”¯æŒç¹ä½“æ±‰å­—ä»¥åŠæ—¥éŸ©æ±‰å­—ç­‰ã€‚
* **Unicodeå­—ç¬¦é›†** ï¼š
  * Unicodeç¼–ç ç³»ç»Ÿä¸ºè¡¨è¾¾ä»»æ„è¯­è¨€çš„ä»»æ„å­—ç¬¦è€Œè®¾è®¡ï¼Œæ˜¯ä¸šç•Œçš„ä¸€ç§æ ‡å‡†ï¼Œä¹Ÿç§°ä¸ºç»Ÿä¸€ç ã€æ ‡å‡†ä¸‡å›½ç ã€‚
  * å®ƒæœ€å¤šä½¿ç”¨4ä¸ªå­—èŠ‚çš„æ•°å­—æ¥è¡¨è¾¾æ¯ä¸ªå­—æ¯ã€ç¬¦å·ï¼Œæˆ–è€…æ–‡å­—ã€‚æœ‰ä¸‰ç§ç¼–ç æ–¹æ¡ˆï¼ŒUTF-8ã€UTF-16å’ŒUTF-32ã€‚æœ€ä¸ºå¸¸ç”¨çš„UTF-8ç¼–ç ã€‚
  * UTF-8ç¼–ç ï¼Œå¯ä»¥ç”¨æ¥è¡¨ç¤ºUnicodeæ ‡å‡†ä¸­ä»»ä½•å­—ç¬¦ï¼Œå®ƒæ˜¯ç”µå­é‚®ä»¶ã€ç½‘é¡µåŠå…¶ä»–å­˜å‚¨æˆ–ä¼ é€æ–‡å­—çš„åº”ç”¨ä¸­ï¼Œä¼˜å…ˆé‡‡ç”¨çš„ç¼–ç ã€‚äº’è”ç½‘å·¥ç¨‹å·¥ä½œå°ç»„ï¼ˆIETFï¼‰è¦æ±‚æ‰€æœ‰äº’è”ç½‘åè®®éƒ½å¿…é¡»æ”¯æŒUTF-8ç¼–ç ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¼€å‘Webåº”ç”¨ï¼Œä¹Ÿè¦ä½¿ç”¨UTF-8ç¼–ç ã€‚å®ƒä½¿ç”¨ä¸€è‡³å››ä¸ªå­—èŠ‚ä¸ºæ¯ä¸ªå­—ç¬¦ç¼–ç ï¼Œç¼–ç è§„åˆ™ï¼š
    1. 128ä¸ªUS-ASCIIå­—ç¬¦ï¼Œåªéœ€ä¸€ä¸ªå­—èŠ‚ç¼–ç ã€‚
    2. æ‹‰ä¸æ–‡ç­‰å­—ç¬¦ï¼Œéœ€è¦äºŒä¸ªå­—èŠ‚ç¼–ç ã€‚ 
    3. å¤§éƒ¨åˆ†å¸¸ç”¨å­—ï¼ˆå«ä¸­æ–‡ï¼‰ï¼Œä½¿ç”¨ä¸‰ä¸ªå­—èŠ‚ç¼–ç ã€‚
    4. å…¶ä»–æå°‘ä½¿ç”¨çš„Unicodeè¾…åŠ©å­—ç¬¦ï¼Œä½¿ç”¨å››å­—èŠ‚ç¼–ç ã€‚

## 5.2 ç¼–ç å¼•å‡ºçš„é—®é¢˜

åœ¨IDEAä¸­ï¼Œä½¿ç”¨`FileReader` è¯»å–é¡¹ç›®ä¸­çš„æ–‡æœ¬æ–‡ä»¶ã€‚ç”±äºIDEAçš„è®¾ç½®ï¼Œéƒ½æ˜¯é»˜è®¤çš„`UTF-8`ç¼–ç ï¼Œæ‰€ä»¥æ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚ä½†æ˜¯ï¼Œå½“è¯»å–Windowsç³»ç»Ÿä¸­åˆ›å»ºçš„æ–‡æœ¬æ–‡ä»¶æ—¶ï¼Œç”±äºWindowsç³»ç»Ÿçš„é»˜è®¤æ˜¯GBKç¼–ç ï¼Œå°±ä¼šå‡ºç°ä¹±ç ã€‚

```java
public class ReaderDemo {
    public static void main(String[] args) throws IOException {
        FileReader fileReader = new FileReader("E:\\File_GBK.txt");
        int read;
        while ((read = fileReader.read()) != -1) {
            System.out.print((char)read);
        }
        fileReader.close();
    }
}
è¾“å‡ºç»“æœï¼š
ï¿½ï¿½ï¿½
```

é‚£ä¹ˆå¦‚ä½•è¯»å–GBKç¼–ç çš„æ–‡ä»¶å‘¢ï¼Ÿ 

## 5.3 InputStreamReaderç±»  

è½¬æ¢æµ`java.io.InputStreamReader`ï¼Œæ˜¯Readerçš„å­ç±»ï¼Œæ˜¯ä»å­—èŠ‚æµåˆ°å­—ç¬¦æµçš„æ¡¥æ¢ã€‚å®ƒè¯»å–å­—èŠ‚ï¼Œå¹¶ä½¿ç”¨æŒ‡å®šçš„å­—ç¬¦é›†å°†å…¶è§£ç ä¸ºå­—ç¬¦ã€‚å®ƒçš„å­—ç¬¦é›†å¯ä»¥ç”±åç§°æŒ‡å®šï¼Œä¹Ÿå¯ä»¥æ¥å—å¹³å°çš„é»˜è®¤å­—ç¬¦é›†ã€‚ 

### æ„é€ æ–¹æ³•

* `InputStreamReader(InputStream in)`: åˆ›å»ºä¸€ä¸ªä½¿ç”¨é»˜è®¤å­—ç¬¦é›†çš„å­—ç¬¦æµã€‚ 
* `InputStreamReader(InputStream in, String charsetName)`: åˆ›å»ºä¸€ä¸ªæŒ‡å®šå­—ç¬¦é›†çš„å­—ç¬¦æµã€‚

æ„é€ ä¸¾ä¾‹ï¼Œä»£ç å¦‚ä¸‹ï¼š 

```java
InputStreamReader isr = new InputStreamReader(new FileInputStream("in.txt"));
InputStreamReader isr2 = new InputStreamReader(new FileInputStream("in.txt") , "GBK");
```

### æŒ‡å®šç¼–ç è¯»å–

```java
public class ReaderDemo2 {
    public static void main(String[] args) throws IOException {
      	// å®šä¹‰æ–‡ä»¶è·¯å¾„,æ–‡ä»¶ä¸ºgbkç¼–ç 
        String FileName = "E:\\file_gbk.txt";
      	// åˆ›å»ºæµå¯¹è±¡,é»˜è®¤UTF8ç¼–ç 
        InputStreamReader isr = new InputStreamReader(new FileInputStream(FileName));
      	// åˆ›å»ºæµå¯¹è±¡,æŒ‡å®šGBKç¼–ç 
        InputStreamReader isr2 = new InputStreamReader(new FileInputStream(FileName) , "GBK");
		// å®šä¹‰å˜é‡,ä¿å­˜å­—ç¬¦
        int read;
      	// ä½¿ç”¨é»˜è®¤ç¼–ç å­—ç¬¦æµè¯»å–,ä¹±ç 
        while ((read = isr.read()) != -1) {
            System.out.print((char)read); // ï¿½ï¿½Òºï¿½
        }
        isr.close();
      
      	// ä½¿ç”¨æŒ‡å®šç¼–ç å­—ç¬¦æµè¯»å–,æ­£å¸¸è§£æ
        while ((read = isr2.read()) != -1) {
            System.out.print((char)read);// å¤§å®¶å¥½
        }
        isr2.close();
    }
}
```

## 5.4 OutputStreamWriterç±»

è½¬æ¢æµ`java.io.OutputStreamWriter` ï¼Œæ˜¯Writerçš„å­ç±»ï¼Œæ˜¯ä»å­—ç¬¦æµåˆ°å­—èŠ‚æµçš„æ¡¥æ¢ã€‚ä½¿ç”¨æŒ‡å®šçš„å­—ç¬¦é›†å°†å­—ç¬¦ç¼–ç ä¸ºå­—èŠ‚ã€‚å®ƒçš„å­—ç¬¦é›†å¯ä»¥ç”±åç§°æŒ‡å®šï¼Œä¹Ÿå¯ä»¥æ¥å—å¹³å°çš„é»˜è®¤å­—ç¬¦é›†ã€‚ 

### æ„é€ æ–¹æ³•

- `OutputStreamWriter(OutputStream in)`: åˆ›å»ºä¸€ä¸ªä½¿ç”¨é»˜è®¤å­—ç¬¦é›†çš„å­—ç¬¦æµã€‚ 
- `OutputStreamWriter(OutputStream in, String charsetName)`: åˆ›å»ºä¸€ä¸ªæŒ‡å®šå­—ç¬¦é›†çš„å­—ç¬¦æµã€‚

æ„é€ ä¸¾ä¾‹ï¼Œä»£ç å¦‚ä¸‹ï¼š 

```java
OutputStreamWriter isr = new OutputStreamWriter(new FileOutputStream("out.txt"));
OutputStreamWriter isr2 = new OutputStreamWriter(new FileOutputStream("out.txt") , "GBK");
```

### æŒ‡å®šç¼–ç å†™å‡º

```java
public class OutputDemo {
    public static void main(String[] args) throws IOException {
      	// å®šä¹‰æ–‡ä»¶è·¯å¾„
        String FileName = "E:\\out.txt";
      	// åˆ›å»ºæµå¯¹è±¡,é»˜è®¤UTF8ç¼–ç 
        OutputStreamWriter osw = new OutputStreamWriter(new FileOutputStream(FileName));
        // å†™å‡ºæ•°æ®
      	osw.write("ä½ å¥½"); // ä¿å­˜ä¸º6ä¸ªå­—èŠ‚
        osw.close();
      	
		// å®šä¹‰æ–‡ä»¶è·¯å¾„
		String FileName2 = "E:\\out2.txt";
     	// åˆ›å»ºæµå¯¹è±¡,æŒ‡å®šGBKç¼–ç 
        OutputStreamWriter osw2 = new OutputStreamWriter(new FileOutputStream(FileName2),"GBK");
        // å†™å‡ºæ•°æ®
      	osw2.write("ä½ å¥½");// ä¿å­˜ä¸º4ä¸ªå­—èŠ‚
        osw2.close();
    }
}
```

### è½¬æ¢æµç†è§£å›¾è§£

**è½¬æ¢æµæ˜¯å­—èŠ‚ä¸å­—ç¬¦é—´çš„æ¡¥æ¢ï¼**![](2_zhuanhuan.jpg)
## 5.5 ç»ƒä¹ ï¼šè½¬æ¢æ–‡ä»¶ç¼–ç 

å°†GBKç¼–ç çš„æ–‡æœ¬æ–‡ä»¶ï¼Œè½¬æ¢ä¸ºUTF-8ç¼–ç çš„æ–‡æœ¬æ–‡ä»¶ã€‚

### æ¡ˆä¾‹åˆ†æ

1. æŒ‡å®šGBKç¼–ç çš„è½¬æ¢æµï¼Œè¯»å–æ–‡æœ¬æ–‡ä»¶ã€‚
2. ä½¿ç”¨UTF-8ç¼–ç çš„è½¬æ¢æµï¼Œå†™å‡ºæ–‡æœ¬æ–‡ä»¶ã€‚

### æ¡ˆä¾‹å®ç°

```java
public class TransDemo {
   public static void main(String[] args) {      
    	// 1.å®šä¹‰æ–‡ä»¶è·¯å¾„
     	String srcFile = "file_gbk.txt";
        String destFile = "file_utf8.txt";
		// 2.åˆ›å»ºæµå¯¹è±¡
    	// 2.1 è½¬æ¢è¾“å…¥æµ,æŒ‡å®šGBKç¼–ç 
        InputStreamReader isr = new InputStreamReader(new FileInputStream(srcFile) , "GBK");
    	// 2.2 è½¬æ¢è¾“å‡ºæµ,é»˜è®¤utf8ç¼–ç 
        OutputStreamWriter osw = new OutputStreamWriter(new FileOutputStream(destFile));
		// 3.è¯»å†™æ•°æ®
    	// 3.1 å®šä¹‰æ•°ç»„
        char[] cbuf = new char[1024];
    	// 3.2 å®šä¹‰é•¿åº¦
        int len;
    	// 3.3 å¾ªç¯è¯»å–
        while ((len = isr.read(cbuf))!=-1) {
            // å¾ªç¯å†™å‡º
          	osw.write(cbuf,0,len);
        }
    	// 4.é‡Šæ”¾èµ„æº
        osw.close();
        isr.close();
  	}
}
```

# ç¬¬å…­ç«  åºåˆ—åŒ–

## 6.1 æ¦‚è¿°

Java æä¾›äº†ä¸€ç§å¯¹è±¡**åºåˆ—åŒ–**çš„æœºåˆ¶ã€‚ç”¨ä¸€ä¸ªå­—èŠ‚åºåˆ—å¯ä»¥è¡¨ç¤ºä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å­—èŠ‚åºåˆ—åŒ…å«è¯¥`å¯¹è±¡çš„æ•°æ®`ã€`å¯¹è±¡çš„ç±»å‹`å’Œ`å¯¹è±¡ä¸­å­˜å‚¨çš„å±æ€§`ç­‰ä¿¡æ¯ã€‚å­—èŠ‚åºåˆ—å†™å‡ºåˆ°æ–‡ä»¶ä¹‹åï¼Œç›¸å½“äºæ–‡ä»¶ä¸­**æŒä¹…ä¿å­˜**äº†ä¸€ä¸ªå¯¹è±¡çš„ä¿¡æ¯ã€‚ 

åä¹‹ï¼Œè¯¥å­—èŠ‚åºåˆ—è¿˜å¯ä»¥ä»æ–‡ä»¶ä¸­è¯»å–å›æ¥ï¼Œé‡æ„å¯¹è±¡ï¼Œå¯¹å®ƒè¿›è¡Œ**ååºåˆ—åŒ–**ã€‚`å¯¹è±¡çš„æ•°æ®`ã€`å¯¹è±¡çš„ç±»å‹`å’Œ`å¯¹è±¡ä¸­å­˜å‚¨çš„æ•°æ®`ä¿¡æ¯ï¼Œéƒ½å¯ä»¥ç”¨æ¥åœ¨å†…å­˜ä¸­åˆ›å»ºå¯¹è±¡ã€‚çœ‹å›¾ç†è§£åºåˆ—åŒ–ï¼š ![](3_xuliehua.jpg)

## 6.2 ObjectOutputStreamç±»

`java.io.ObjectOutputStream ` ç±»ï¼Œå°†Javaå¯¹è±¡çš„åŸå§‹æ•°æ®ç±»å‹å†™å‡ºåˆ°æ–‡ä»¶,å®ç°å¯¹è±¡çš„æŒä¹…å­˜å‚¨ã€‚

### æ„é€ æ–¹æ³•

* `public ObjectOutputStream(OutputStream out) `ï¼š åˆ›å»ºä¸€ä¸ªæŒ‡å®šOutputStreamçš„ObjectOutputStreamã€‚

æ„é€ ä¸¾ä¾‹ï¼Œä»£ç å¦‚ä¸‹ï¼š  

```java
FileOutputStream fileOut = new FileOutputStream("employee.txt");
ObjectOutputStream out = new ObjectOutputStream(fileOut);
```

### åºåˆ—åŒ–æ“ä½œ

1. ä¸€ä¸ªå¯¹è±¡è¦æƒ³åºåˆ—åŒ–ï¼Œå¿…é¡»æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶:

* è¯¥ç±»å¿…é¡»å®ç°`java.io.Serializable ` æ¥å£ï¼Œ`Serializable` æ˜¯ä¸€ä¸ªæ ‡è®°æ¥å£ï¼Œä¸å®ç°æ­¤æ¥å£çš„ç±»å°†ä¸ä¼šä½¿ä»»ä½•çŠ¶æ€åºåˆ—åŒ–æˆ–ååºåˆ—åŒ–ï¼Œä¼šæŠ›å‡º`NotSerializableException` ã€‚
* è¯¥ç±»çš„æ‰€æœ‰å±æ€§å¿…é¡»æ˜¯å¯åºåˆ—åŒ–çš„ã€‚å¦‚æœæœ‰ä¸€ä¸ªå±æ€§ä¸éœ€è¦å¯åºåˆ—åŒ–çš„ï¼Œåˆ™è¯¥å±æ€§å¿…é¡»æ³¨æ˜æ˜¯ç¬æ€çš„ï¼Œä½¿ç”¨`transient` å…³é”®å­—ä¿®é¥°ã€‚

```java
public class Employee implements java.io.Serializable {
    public String name;
    public String address;
    public transient int age; // transientç¬æ€ä¿®é¥°æˆå‘˜,ä¸ä¼šè¢«åºåˆ—åŒ–
    public void addressCheck() {
      	System.out.println("Address  check : " + name + " -- " + address);
    }
}
```

2.å†™å‡ºå¯¹è±¡æ–¹æ³•

* `public final void writeObject (Object obj)` : å°†æŒ‡å®šçš„å¯¹è±¡å†™å‡ºã€‚

```java
public class SerializeDemo{
   	public static void main(String [] args)   {
    	Employee e = new Employee();
    	e.name = "zhangsan";
    	e.address = "beiqinglu";
    	e.age = 20; 
    	try {
      		// åˆ›å»ºåºåˆ—åŒ–æµå¯¹è±¡
          ObjectOutputStream out = new ObjectOutputStream(new FileOutputStream("employee.txt"));
        	// å†™å‡ºå¯¹è±¡
        	out.writeObject(e);
        	// é‡Šæ”¾èµ„æº
        	out.close();
        	fileOut.close();
        	System.out.println("Serialized data is saved"); // å§“åï¼Œåœ°å€è¢«åºåˆ—åŒ–ï¼Œå¹´é¾„æ²¡æœ‰è¢«åºåˆ—åŒ–ã€‚
        } catch(IOException i)   {
            i.printStackTrace();
        }
   	}
}
è¾“å‡ºç»“æœï¼š
Serialized data is saved
```

## 6.3 ObjectInputStreamç±»

ObjectInputStreamååºåˆ—åŒ–æµï¼Œå°†ä¹‹å‰ä½¿ç”¨ObjectOutputStreamåºåˆ—åŒ–çš„åŸå§‹æ•°æ®æ¢å¤ä¸ºå¯¹è±¡ã€‚ 

### æ„é€ æ–¹æ³•

* `public ObjectInputStream(InputStream in) `ï¼š åˆ›å»ºä¸€ä¸ªæŒ‡å®šInputStreamçš„ObjectInputStreamã€‚

### ååºåˆ—åŒ–æ“ä½œ1

å¦‚æœèƒ½æ‰¾åˆ°ä¸€ä¸ªå¯¹è±¡çš„classæ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œååºåˆ—åŒ–æ“ä½œï¼Œè°ƒç”¨`ObjectInputStream`è¯»å–å¯¹è±¡çš„æ–¹æ³•ï¼š

- `public final Object readObject ()` : è¯»å–ä¸€ä¸ªå¯¹è±¡ã€‚

```java
public class DeserializeDemo {
   public static void main(String [] args)   {
        Employee e = null;
        try {		
             // åˆ›å»ºååºåˆ—åŒ–æµ
             FileInputStream fileIn = new FileInputStream("employee.txt");
             ObjectInputStream in = new ObjectInputStream(fileIn);
             // è¯»å–ä¸€ä¸ªå¯¹è±¡
             e = (Employee) in.readObject();
             // é‡Šæ”¾èµ„æº
             in.close();
             fileIn.close();
        }catch(IOException i) {
             // æ•è·å…¶ä»–å¼‚å¸¸
             i.printStackTrace();
             return;
        }catch(ClassNotFoundException c)  {
        	// æ•è·ç±»æ‰¾ä¸åˆ°å¼‚å¸¸
             System.out.println("Employee class not found");
             c.printStackTrace();
             return;
        }
        // æ— å¼‚å¸¸,ç›´æ¥æ‰“å°è¾“å‡º
        System.out.println("Name: " + e.name);	// zhangsan
        System.out.println("Address: " + e.address); // beiqinglu
        System.out.println("age: " + e.age); // 0
    }
}
```

**å¯¹äºJVMå¯ä»¥ååºåˆ—åŒ–å¯¹è±¡ï¼Œå®ƒå¿…é¡»æ˜¯èƒ½å¤Ÿæ‰¾åˆ°classæ–‡ä»¶çš„ç±»ã€‚å¦‚æœæ‰¾ä¸åˆ°è¯¥ç±»çš„classæ–‡ä»¶ï¼Œåˆ™æŠ›å‡ºä¸€ä¸ª `ClassNotFoundException` å¼‚å¸¸ã€‚**  

### **ååºåˆ—åŒ–æ“ä½œ2**

**å¦å¤–ï¼Œå½“JVMååºåˆ—åŒ–å¯¹è±¡æ—¶ï¼Œèƒ½æ‰¾åˆ°classæ–‡ä»¶ï¼Œä½†æ˜¯classæ–‡ä»¶åœ¨åºåˆ—åŒ–å¯¹è±¡ä¹‹åå‘ç”Ÿäº†ä¿®æ”¹ï¼Œé‚£ä¹ˆååºåˆ—åŒ–æ“ä½œä¹Ÿä¼šå¤±è´¥ï¼ŒæŠ›å‡ºä¸€ä¸ª`InvalidClassException`å¼‚å¸¸ã€‚**å‘ç”Ÿè¿™ä¸ªå¼‚å¸¸çš„åŸå› å¦‚ä¸‹ï¼š

* è¯¥ç±»çš„åºåˆ—ç‰ˆæœ¬å·ä¸ä»æµä¸­è¯»å–çš„ç±»æè¿°ç¬¦çš„ç‰ˆæœ¬å·ä¸åŒ¹é… 
* è¯¥ç±»åŒ…å«æœªçŸ¥æ•°æ®ç±»å‹ 
* è¯¥ç±»æ²¡æœ‰å¯è®¿é—®çš„æ— å‚æ•°æ„é€ æ–¹æ³• 

`Serializable` æ¥å£ç»™éœ€è¦åºåˆ—åŒ–çš„ç±»ï¼Œæä¾›äº†ä¸€ä¸ªåºåˆ—ç‰ˆæœ¬å·ã€‚`serialVersionUID` è¯¥ç‰ˆæœ¬å·çš„ç›®çš„åœ¨äºéªŒè¯åºåˆ—åŒ–çš„å¯¹è±¡å’Œå¯¹åº”ç±»æ˜¯å¦ç‰ˆæœ¬åŒ¹é…ã€‚

```java
public class Employee implements java.io.Serializable {
     // åŠ å…¥åºåˆ—ç‰ˆæœ¬å·
     private static final long serialVersionUID = 1L;
     public String name;
     public String address;
     // æ·»åŠ æ–°çš„å±æ€§ ,é‡æ–°ç¼–è¯‘, å¯ä»¥ååºåˆ—åŒ–,è¯¥å±æ€§èµ‹ä¸ºé»˜è®¤å€¼.
     public int eid; 

     public void addressCheck() {
         System.out.println("Address  check : " + name + " -- " + address);
     }
}
```



## 6.4 ç»ƒä¹ ï¼šåºåˆ—åŒ–é›†åˆ

1. å°†å­˜æœ‰å¤šä¸ªè‡ªå®šä¹‰å¯¹è±¡çš„é›†åˆåºåˆ—åŒ–æ“ä½œï¼Œä¿å­˜åˆ°`list.txt`æ–‡ä»¶ä¸­ã€‚
2. ååºåˆ—åŒ–`list.txt` ï¼Œå¹¶éå†é›†åˆï¼Œæ‰“å°å¯¹è±¡ä¿¡æ¯ã€‚

### æ¡ˆä¾‹åˆ†æ

1. æŠŠè‹¥å¹²å­¦ç”Ÿå¯¹è±¡ ï¼Œä¿å­˜åˆ°é›†åˆä¸­ã€‚
2. æŠŠé›†åˆåºåˆ—åŒ–ã€‚
3. ååºåˆ—åŒ–è¯»å–æ—¶ï¼Œåªéœ€è¦è¯»å–ä¸€æ¬¡ï¼Œè½¬æ¢ä¸ºé›†åˆç±»å‹ã€‚
4. éå†é›†åˆï¼Œå¯ä»¥æ‰“å°æ‰€æœ‰çš„å­¦ç”Ÿä¿¡æ¯

### æ¡ˆä¾‹å®ç°

```java
public class SerTest {
	public static void main(String[] args) throws Exception {
		// åˆ›å»º å­¦ç”Ÿå¯¹è±¡
		Student student = new Student("è€ç‹", "laow");
		Student student2 = new Student("è€å¼ ", "laoz");
		Student student3 = new Student("è€æ", "laol");

		ArrayList<Student> arrayList = new ArrayList<>();
		arrayList.add(student);
		arrayList.add(student2);
		arrayList.add(student3);
		// åºåˆ—åŒ–æ“ä½œ
		// serializ(arrayList);
		
		// ååºåˆ—åŒ–  
		ObjectInputStream ois  = new ObjectInputStream(new FileInputStream("list.txt"));
		// è¯»å–å¯¹è±¡,å¼ºè½¬ä¸ºArrayListç±»å‹
		ArrayList<Student> list  = (ArrayList<Student>)ois.readObject();
		
      	for (int i = 0; i < list.size(); i++ ){
          	Student s = list.get(i);
        	System.out.println(s.getName()+"--"+ s.getPwd());
      	}
	}

	private static void serializ(ArrayList<Student> arrayList) throws Exception {
		// åˆ›å»º åºåˆ—åŒ–æµ 
		ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream("list.txt"));
		// å†™å‡ºå¯¹è±¡
		oos.writeObject(arrayList);
		// é‡Šæ”¾èµ„æº
		oos.close();
	}
}
```

#  ç¬¬ä¸ƒç«  æ‰“å°æµ

## 7.1 æ¦‚è¿°

å¹³æ—¶æˆ‘ä»¬åœ¨æ§åˆ¶å°æ‰“å°è¾“å‡ºï¼Œæ˜¯è°ƒç”¨`print`æ–¹æ³•å’Œ`println`æ–¹æ³•å®Œæˆçš„ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•éƒ½æ¥è‡ªäº`java.io.PrintStream`ç±»ï¼Œè¯¥ç±»èƒ½å¤Ÿæ–¹ä¾¿åœ°æ‰“å°å„ç§æ•°æ®ç±»å‹çš„å€¼ï¼Œæ˜¯ä¸€ç§ä¾¿æ·çš„è¾“å‡ºæ–¹å¼ã€‚

## 7.2 PrintStreamç±»

### æ„é€ æ–¹æ³•

* `public PrintStream(String fileName)  `ï¼š ä½¿ç”¨æŒ‡å®šçš„æ–‡ä»¶ååˆ›å»ºä¸€ä¸ªæ–°çš„æ‰“å°æµã€‚

æ„é€ ä¸¾ä¾‹ï¼Œä»£ç å¦‚ä¸‹ï¼š  

```java
PrintStream ps = new PrintStream("ps.txt")ï¼›
```

### æ”¹å˜æ‰“å°æµå‘

`System.out`å°±æ˜¯`PrintStream`ç±»å‹çš„ï¼Œåªä¸è¿‡å®ƒçš„æµå‘æ˜¯ç³»ç»Ÿè§„å®šçš„ï¼Œæ‰“å°åœ¨æ§åˆ¶å°ä¸Šã€‚ä¸è¿‡ï¼Œæ—¢ç„¶æ˜¯æµå¯¹è±¡ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç©ä¸€ä¸ª"å°æŠŠæˆ"ï¼Œæ”¹å˜å®ƒçš„æµå‘ã€‚

```java
public class PrintDemo {
    public static void main(String[] args) throws IOException {
		// è°ƒç”¨ç³»ç»Ÿçš„æ‰“å°æµ,æ§åˆ¶å°ç›´æ¥è¾“å‡º97
        System.out.println(97);
      
		// åˆ›å»ºæ‰“å°æµ,æŒ‡å®šæ–‡ä»¶çš„åç§°
        PrintStream ps = new PrintStream("ps.txt");
      	
      	// è®¾ç½®ç³»ç»Ÿçš„æ‰“å°æµæµå‘,è¾“å‡ºåˆ°ps.txt
        System.setOut(ps);
      	// è°ƒç”¨ç³»ç»Ÿçš„æ‰“å°æµ,ps.txtä¸­è¾“å‡º97
        System.out.println(97);
    }
}
```